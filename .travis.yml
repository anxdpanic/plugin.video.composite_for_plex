language: python
python:
  - "3.6"

env:
  global:
    - ADDON_PYTHON_PATH=$TRAVIS_BUILD_DIR/resources/lib/

before_install:
  - |
    cd $HOME
    git clone https://github.com/xbmc/addon-check
    cd $TRAVIS_BUILD_DIR

install:
  - pip install isort
  - pip install pylint
  - pip install $HOME/addon-check/

before_script:
  - |
    rm -f .gitattributes
    mv .pylintrc $HOME
    cd $HOME

script:
  - kodi-addon-checker $TRAVIS_BUILD_DIR --branch=jarvis
  - pylint $ADDON_PYTHON_PATH
  - isort -sl -rc $ADDON_PYTHON_PATH --diff
